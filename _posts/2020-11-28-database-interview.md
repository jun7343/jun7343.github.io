---
layout: post
title: "Database 기본 기술 면접 예상 질문"
categories: [Interview, Database]
---

기술 면접에 앞서 Database 관련 예상 질문을 나열해 본다. 해당 질문들은 다른 개발자 블로그 분들 글을 정리하였다.

### Database 예상 질문

- **스키마란**
  - 스키마는 데이터베이스의 구조와 제약 조건에 관한 전반적인 명세를 기술한 메타데이터 집합이다. 데이터베이스를 구성하는 데이터 개체, 속성, 관계 및 데이터 조작 시 데이터 값들이 갖는 제약 조건 등에 관해 전반적으로 정의 한다. 스키마는 사용자의 관점에 따라 외부 스키마, 개념 스키마, 내부 스키마로 나눠진다.
  - 외부 스키마(사용자 뷰): 사용자나 응용 프로그래머가 각 개인의 입장에서 필요로 하는 데이터베이스의 논리적 구조를 정의한 것
  - 개념 스키마(전체적인 뷰): 데이터베이스의 전체적인 논리적 구조로서, 모든 응용 프로그램이나 사용자들이 필요로 하는 데이터를 종합한 조직 전체의 데이터베이스로 하나만 존재한다.
  - 내부 스키마(저장 스키마): 물리적 저장장치의 입장에서 본 데이터베이스 구조로, 물리적인 저장장치와 밀접한 계층이다.
- **정규화란?**
  - 데이터 중복을 최소화하고 테이블의 삽입, 삭제, 갱신 과정에서 발생하는 이상현상을 방지하기 위함.
- **정규화 단계 설명**
  - 제 1정규화: 각 컬럼들은 값이 원자값을 가지게 바꾼다. 릴레이션에 속한 모든 속성의 도메인이 원자 값으로만 구성 되어있으면 제 1정규형이다.
  - 제 2정규화: 테이블의 모든 컬럼에서 부분 함수적 종속을 제거. 제 1정규화에 속하면서 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속되면 제 2정규형이다.
  - 제 3정규화: 기본키를 제외한 속성들 간의 이행적 함수 종속 제거. 제 2정규화에 속하면서 기본키가 아닌 모든 속성이 기본키에 이행적 함수 종속이 되지 않으면 제 3정규형이다.
  - 제 BNCF화: 결정자이면서 후보키 아닌 것 제거. 
  - 제 4정규화: 애트리뷰트가 값이 원자값이 아닌 값을 여러개 갖는 릴레이션을 분해하여 애트리뷰트가 원자값을 갖도록 하는 정규형.
  - 제 5정규화: 여러개의 릴레이션으로 한 릴레이션을 분해했을 때, 모든 나눠진 릴레이션이 원래 릴레이션의 슈퍼키이며 릴레이션을 더 분해할 경우, 기존 릴레이션의 정보가 손실되기 때문에 더 이상 릴레이션이 분해가 될 수 없는 경우를 말한다.
- **반정규화란?**
  - 정규화된 엔티티,속성,관계에 대해 시스템의 성능 향상과 개발과 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링 기법. 즉, 데이터를 중복하여 성능을 향상 시키는 기법.
- **데이터 무결성에 위배될 수 있는 반정규화를 수행하는 이유**
  - 데이터를 조회할 때 디스크 I/O 량이 많아 성능이 저하되는 경우.
  - 경로가 너무 멀어 조인으로 인한 성능저하가 예상되는 경우.
  - 컬럼을 계산하여 읽을 때, 성능 저하가 예상되는 경우.
- **반정규화의 적용 방법 및 절차**
  - 데이터의 무결성이 깨질 가능성이 많으므로 데이터의 무결성을 보장할 수 있는 방법을 고려한 후에 적용.
  - <img src="/assets/images/interview/database-interview/de-normalization.jpg">
- **함수적 종속이란?**
  - 테이블 속성들 간의 관계에 대한 제약 조건으로 속성A가 속성B를 결정할 때 B는 A에 함수적 종속된다고 한다.
- **인덱스란**
  - 테이블에 저장된 데이터를 빠르게 조회하기 위한 데이터베이스 객체.
- **데이터베이스 개념**
  - 여러 사람에 의해 공유되어 사용될 목적으로 통합하여 관리되는 데이터 집합을 말한다.
- **관계형 데이터베이스와 비관계형 데이터베이스 차이**
  - 관계형 데이터베이스란 테이블로 이루어져 있으며 키와 값으로 관계를 나타낸다. 이처럼 데이터의 종속적 관계로 표현하는 것이 관계형 데이터베이스이다. 비관계형 데이터베이스는 행과 열로 이루어진 테이블 형식의 스키마를 사용하지 않는 데이터베이스다. 데이터 형식의 특정 요구 사항에 맞게 최적화된 저장소 모델을 사용하는 것이 특징이며 흔히들 NoSQL(not only SQL)이라고 하며 데이터를 저장할 때 SQL문이 아닌 다른 프로그래밍 언어 및 구문을 사용한다.
- **무결성 이란**
  - 무결성이란 데이터의 정확성, 일관성, 유효성을 유지하는 것을 말한다.
  - 개체 무결성: 기본값으로 선택된 값은 Null 값을 허용하지 않는다.
  - 참조 무결성: 서로 참조 관계에 있는 두 테이블의 데이터는 항상 일관된 값을 유지한다.
  - 도메인 무결성: 테이블에 존재하는 필드의 무결성을 보장하기 위해 올바른 데이터가 입력되었는지 체크하는 것.
  - 고유 무결성: 특정 속성에 대한 고유한 값을 가지도록 조건이 주어질 경우 그 속성의 값들은 모두 고유한 값을 가진다.(같으면 안됨)
  - NULL 무결성: 특정 속성값에 NULL이 올 수 없다는 조건이 주어지면 해당 속성값에는 NULL 오면 안된다는 제약조건.
  - 키 무결성: 한 릴레이션에는 최소한 하나의 키가 존재 해야 하는 제약조건
- **무결성 유지 이유는?**
  - 무결성이 유지되어야 DB에 저장된 데이터 값과 거기에 해당되는 현실 세계의 실제값이 일치하는지 신뢰할 수 있다.
- **뷰 란?**
  - 사용자에게 접근이 허용된 자료만을 제한적으로 보여주기 위해 하나 이상의 기본 테이블로 유도된 이름을 가진 가상 테이블 이다. 뷰는 저장장치 내에 물리적으로 존재하지 않지만 사용자에게 있는 것처럼 간주된다. 뷰로 구성된 내용에 대한 삽입, 삭제, 갱신, 연산에 대한 제약이 따른다.
- **트랜잭션이란?**
  - 하나의 논리적인 기능을 수행하기 위한 작업 단위로 DB의 일관된 상태를 또 다른 일관된 상태로 변환시키는 기능을 수행한다.
- **트랜잭션 성질 4가지**
  - Atomicity(원자성): 트랜잭션의 연산이 DB에 모두 반영되던지 전혀 반영이 되지 않던지 둘 중에 하나만 수행해야 한다.
  - Consistency(일관성): 트랜잭션이 성공적으로 수행된 후 DB는 언제나 일관성 있게 변환 되어야 한다.
  - Isolation(독립성): 수행중인 트랜잭션이 완전히 수행되기 전까진 다른 트랜잭션에서 수행 결과를 참조할 수 없다. 
  - Durablility(영속성): 성공적으로 수행된 트랜잭션의 결과는 시스템이 고장 나더라도 영구적으로 반영되어야 한다.
- **트랜잭션 병행 처리시 발생하는 문제**
  - 갱신 내용 손실: 동시에 하나의 데이터를 갱신될 때 하나의 갱신이 누락된 경우
  - 현황 파악 오류: 하나의 데이터 갱신이 끝나지 않은 시점에서 다른 트랜잭션이 해당 데이터를 조회하는 경우
  - 모순성: 두 트랜잭션이 동시에 실행될 때 데이터베이스가 일관성 없는 모순된 상태로 남는 문제
  - 연쇄 복귀: 두 트랜잭션이 하나의 레코드를 갱신할 때 하나의 트랜잭션이 롤백 했을 경우 다른 하나의 트랜잭션 마저도 롤백 되는 문제.
- **트랜잭션 병행 처리 방지 방법은?**
  - 로킹 제어 기법을 사용한다.
  - 로킹 이란 어떤 트랜잭션이 DB의 데이터를 사용할 떄 DB의 일정부분을 Lock 시키고 트랜잭션이 완료될 때 해당 부분을 Unlock 시키는 방법이다. 종류는 크게 두가지로 공유 로킹은 Lock 한 부분은 읽을 수는 있지만 쓰기는 불가능하며, 배타 로킹은 읽기,쓰기 둘 다 불가능 하게 한 것이다.
- **트랜잭션 격리 문제점**
  - Dirty Read: 한 트랜잭션이 데이터 값을 변경 하고 커밋하지 않았을 때 다른 트랜잭션이 해당 데이터를 읽은 후 이전 트랜잭션이 커밋하지 않고 종료하게 되면 해당 데이터는 꼬이게 된다.
  - Non-Repeatable Read: 한 트랜잭션이 데이터를 Read 하고 있다. 이 때 다른 트랜잭션이 해당 데이터에 접근하며 삭제 또는 변경하게 된다면, Read 하고 있는 트랜잭션은 변경 되거나 삭제된 데이터를 찾게 된다.
  - Phantom Read: 하나의 트랜잭션이 특정 조건으로 데이터를 조회 하여 결과를 얻었다. 이때 다른 트랜잭션이 접근해 해당 조건의 일부를 삭제 또는 추가 했을 때 아직 조회가 끝나지 않은 트랜잭션이 다시 한번 같은 특정 조건으로 데이터를 조회하면 추가/삭제된 데이터가 함께 조회/누락 된다. 그리고 추가/삭제 한 트랜잭션이 롤백 하면 데이터가 꼬이게 된다.
- **트랜잭션 격리 4단계란?**
  - 단계 순서로 설명하며 단계가 높아 질 수 록 이슈 발생은 적지만 성능은 떨어진다.
  - Read Uncommitted(레벨 0): 한 트랜잭션에서 커밋하지 않은 데이터에 다른 트랜잭션의 접근이 가능하다. 즉 커밋하지 않은 데이터를 읽을 수 있다. 해당 격리 수준은 모든 문제에서 발생 가능성이 존재하지만 처리 성능은 가장 높다.(발생 문제점: Dirty Read, Non-Repeatable Read, Phantom Read)
  - Read Committed(레벨 1): Committed이 완료된 데이터만 읽을 수 있다. 이는 Dirty Read가 발생할 여지가 없으나, Read Uncommitted 수준보다 동시 처리 성능은 떨어진다.  다만 Non-Repeatable Read, Phantom Read가 발생 가능하다. 데이터베이스들은 보통 Read Committed를 디폴트 수준으로 지정한다.(발생 문제점: Non-Repeatable Read, Phantom Read)
  - Repeatable Read(레벨 2): 트랜잭션 내에서 조회한 데이터를 반복해서 조회해도 같은 데이터가 조회된다. 이는 개별 데이터 이슈인 Dirty Read나 Non-Repeatable Read는 발생하지 않지만, 결과 집합 자체가 달라지는 Phantom Read는 발생 가능 하다. (발생 문제점: Phantom Read)
  - Serializable(레벨 3): 가장 엄격한 격리 수준. 3가지 문제점을 모두 커버할 수 있다. 다만 동시 처리 성능은 급격히 떨어질 수 있다.
- **데드락이란?**
  - 하나의 데이터를 한 개의 트랜잭션이 읽고 로킹된 상태에서 다른 트랜잭션이 접근 하려 하면 로킹 해제를 기다려야 한다. 그러다 무한정 대기 해야 하는 상황이 발생하는데 이를 데드락이라 한다. 해결 방법은 두개의 트랜잭션중 하나를 롤백하고 나머지 하나를 수행 완료 시킨 후 롤백한 트랜잭션을 다시 실행한다.
- **COMMIT과 ROLLBACK에 대해서 설명**
  - COMMIT은 트랜잭션으로 반영된 DB 변경사항을 저장하는 것이고, ROLLBACK은 트랜잭션으로 반영된 DB의 변경사항을 취소 하는 것이다.
- **데이터베이스 장애 종류 설명**
  - 트랜잭션 장애: 트랜잭션을 정상적으로 완료하지 못함.
  - 시스템 장애: 하드웨어, 소프트웨어 고장으로 인한 장애
  - 디스크 장애: 디스크 스토리지 일부 혹은 전체 붕괴로 인한 장애
- **데이터베이스 회복 기법**
  - 로그기반 회복 기법
  - 자연 갱신 회복 기법
  - 즉시 갱신 회복 기법
  - 체크포인트 회복 기법
  - 체크포인트 지정하여 장애발생시 체크포인트까지 UNDO 실행 후  다시 REDO 실행
  - 그림자 페이징 회복 기법
  - 하드디스크에 그림자 페이지를 만들고 저장해두고 장애발생시 하드디스크에 있는 페이지로 주메모리 페이지 변경
  - 장애 미발생시 그림자 페이지 테이블은 삭제
- **GROUP BY란?**
  - 특정 속성을 기준으로 그룹화 하여 검색할 때 그룹화 할 속성을 지정한다.
- **HAVING과 WHERE의 차이**
  - WHERE은 기본적인 조건절로 모든 필드에 조건을 들 수 있지만, HAVING의 경우 GROUP BY를 통해 특정 필드로 그룹화 된 테이블에 조건을 줄 수 있다.
- **RDS와 RDBS에 대해 설명**
  - RDS(Relational Database )란 관계형 데이터 모델에 기초를 둔 데이터베이스이다. 관계형 데이터 모델이란 데이터를 구성하는데 필요한 방법 중 하나로 모든 데이터를 2차원의 테이블 형태로 표현해준다.
  - RDBS(Relational Database Management System)이란 관계형 데이터베이스를 생성하고 수정하고 관리할 수 있는 소프트웨어이다.


### 참조

- [Database 면접 질문 -피아노치는 개발자](https://kadamon.tistory.com/21)
- [트랜잭션 격리 수준(isolation level) - joon92](https://joont92.github.io/db/%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B2%A9%EB%A6%AC-%EC%88%98%EC%A4%80-isolation-level/)
- [트랜잭션, 트랜잭션 격리수준(Isolation Level) - wmJun](https://feco.tistory.com/45)
- [반정규화의 개념, 수행이유 및 절차 - _Yeony](https://haloworld.tistory.com/19)
